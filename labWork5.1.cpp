/*
Лабораторная работа 5
Задание 1
Программа, выводящая содержимое текстового файла на экран
*/

#include <iostream>
#include <windows.h>
#include <fstream> // Подключаем библиотеку для работы с файловым вводом/выводом
#include <string>

using namespace std;

int main() {
    SetConsoleOutputCP(CP_UTF8); // Установка кодировки консоли для корректного вывода кириллицы

    string filename;
    cout << "Введите имя файла для просмотра (например, test.txt): ";
    // cin >> filename; // Читает только до пробела
    getline(cin, filename); // Лучше использовать getline, чтобы читать имена файлов с пробелами

    // Создаем объект ifstream для чтения из файла
    // c_str() преобразует std::string в const char*, который ожидает конструктор ifstream (в старых стандартах, в C++11+ можно и string)
    ifstream file(filename.c_str());

    // Проверяем, удалось ли открыть файл
    if (!file.is_open()) {
        cerr << "Ошибка: Не удалось открыть файл \"" << filename << "\"" << endl;
        cerr << "Проверьте, существует ли файл и правильно ли указан путь." << endl;
        return 1; // Возвращаем код ошибки
    }

    cout << "--- Содержимое файла ---" << endl;

    // rdbuf() возвращает указатель на буфер файла.
    // Оператор << для ostream перегружен так, что он выводит все содержимое буфера.
    // Это самый быстрый способ скопировать файл в cout.
    cout << file.rdbuf();

    cout << endl << "--- Конец файла ---" << endl;

    // Файл закроется автоматически при выходе объекта file из области видимости (деструктор),
    // но можно закрыть явно:
    file.close();

    return 0;
}
