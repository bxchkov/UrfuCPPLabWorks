/*
Лабораторная работа 6
Задание 3
Описание класса для работы со строкой.
Демонстрация работы конструктора копирования.
*/

#include <iostream>
#include <windows.h>
#include "labWork6.3_string_class.h"

using namespace std;

// Функция, принимающая объект по значению.
// При вызове этой функции будет вызван конструктор копирования.
void testCopyConstructor(MyString s) {
    cout << "Внутри функции testCopyConstructor: " << s << endl;
    // При выходе из функции сработает деструктор для копии s.
    // Если конструктор копирования реализован неправильно (поверхностное копирование),
    // то деструктор удалит память, на которую указывает и оригинальный объект,
    // что приведет к ошибке при дальнейшем использовании оригинала.
}

int main() {
    SetConsoleOutputCP(CP_UTF8); // Для нормального отображения русского языка в консоли

    cout << "--- Создание s1 ---" << endl;
    MyString s1("Hello World");
    cout << "s1: " << s1 << endl;

    cout << "\n--- Тест конструктора копирования (явный вызов) ---" << endl;
    MyString s2 = s1; // Вызов конструктора копирования
    cout << "s2 (копия s1): " << s2 << endl;

    cout << "\n--- Тест конструктора копирования (передача по значению) ---" << endl;
    testCopyConstructor(s1);

    cout << "\n--- Проверка s1 после вызова функции ---" << endl;
    // Если s1 выведется корректно, значит глубокое копирование работает правильно.
    cout << "s1: " << s1 << endl;

    return 0;
}
