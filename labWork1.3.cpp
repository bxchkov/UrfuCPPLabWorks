/*
Лабораторная работа 1
Задание 3
Программа, которая меняет местами значения двух переменных разными способами
*/

#include <iostream>
#include <windows.h>

using namespace std;

// Функция swap1 принимает аргументы по значению.
// Это означает, что в функцию передаются копии переменных a и b.
// Изменения внутри функции затрагивают только копии и не влияют на оригинальные переменные в main.
// Кроме того, в реализации ошибка: temp не инициализирован значением a перед присваиванием.
void swap1(int a, int b) {
    int temp; // Ошибка логики обмена: здесь должно быть int temp = a;
    a = b;
    b = temp; // Здесь присваивается мусорное значение temp
}

// Функция swap2 принимает аргументы по указателю.
// Мы передаем адреса переменных. Функция разыменовывает указатели (*a, *b)
// и работает непосредственно с памятью оригинальных переменных.
// Это позволяет реально изменить значения в main.
void swap2(int* a, int* b) {
    int temp = *a; // Сохраняем значение, на которое указывает a, во временную переменную
    *a = *b;       // Записываем значение по адресу b в адрес a
    *b = temp;     // Записываем сохраненное значение в адрес b
}

// Функция swap3 принимает аргументы по ссылке (C++ feature).
// Ссылка - это псевдоним переменной. Работа с ссылкой эквивалентна работе с самой переменной.
// Это самый удобный и "чистый" способ в C++ для изменения переданных аргументов.
void swap3(int& a, int& b) {
    int temp = a; // Сохраняем значение a
    a = b;        // Присваиваем a значение b
    b = temp;     // Присваиваем b сохраненное значение
}

int main() {
    SetConsoleOutputCP(CP_UTF8); // Установка кодировки UTF-8 для корректного вывода кириллицы

    int a = 2;
    int b = 5;

    // Тест 1: Передача по значению
    cout << "--- Тест swap1 (по значению) ---" << endl;
    cout << "до обмена:    a = " << a << ", b = " << b << endl;
    swap1(a, b);
    cout << "после обмена: a = " << a << ", b = " << b << endl;
    cout << "(Значения не изменились, так как работали с копиями)" << endl << endl;

    // Тест 2: Передача по указателю
    cout << "--- Тест swap2 (по указателю) ---" << endl;
    cout << "до обмена:    a = " << a << ", b = " << b << endl;
    swap2(&a, &b); // Передаем адреса переменных с помощью оператора &
    cout << "после обмена: a = " << a << ", b = " << b << endl;
    cout << "(Значения поменялись местами)" << endl << endl;

    // Тест 3: Передача по ссылке
    // Сейчас a=5, b=2 (после swap2). Меняем обратно.
    cout << "--- Тест swap3 (по ссылке) ---" << endl;
    cout << "до обмена:    a = " << a << ", b = " << b << endl;
    swap3(a, b); // Синтаксис вызова как у обычной функции, но передаются ссылки
    cout << "после обмена: a = " << a << ", b = " << b << endl;
    cout << "(Значения снова поменялись местами)" << endl;

    return 0;
}
